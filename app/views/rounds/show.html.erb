<div class="container pt-5">
  <div class="row mb-2 mx-auto">
    <div class="col col-md-4 text-center order-md-1 mb-3 mb-md-0">
      <h1><strong>TOTAL</strong></h1>
      <p class="h3">
        <strong class="h1"><%= @round.scores.sum(:stroke_count) %></strong><br>
        <%= "(#{@round.scores.sum(:putt_count)})" %>
      </p>
    </div>

    <div class="col-md-4 order-md-0 text-center text-md-right">
      <p class="d-inline-block">
        日付: <%= @round.play_date.strftime("%Y/%m/%d") %><br>
        場所: <%= @round.place %><br>
        天候: <%= @round.weather %><br>
        風: <%= @round.wind %>
      </p>
    </div>

    <div class="col-md-4 order-md-2 text-center text-md-left">
      <p class="d-inline-block">
        フェアウェイキープ: <%= @fairway_keep_rate %>%<br>
        パーオン率: <%= @par_on_rate %>%<br>
        アンダーパーオン率: <%= @under_par_on_rate %>%<br>
        OB: <%= @round.scores.sum(:ob_count) %>回<br>
        ペナルティ: <%= @round.scores.sum(:penalty_count) %>回<br>
      </p>
    </div>
  </div>

  <div class="row text-center pb-3">
    <div class="col">
      <%= link_to "編集", edit_user_round_path(@user, @round), class: "btn btn-success shadow d-inline-block mx-5" %>
      <%= link_to "削除", user_round_path(@user, @round), class: "btn btn-danger shadow d-inline-block mx-5", method: :delete %>
    </div>
  </div>

  <div class="row">

    <div class="col-lg-6">
      <table class="table table-light table-striped table-sm text-center">
        <thead class="bg-secondary text-light">
          <tr>
            <th>HOLE</th>
            <th>PAR</th>
            <th>SCORE</th>
            <th>PUTT</th>
            <th>OB</th>
            <th>PENA</th>
            <th>RESULT</th>
          </tr>
        </thead>
        <tbody>
          <% @round.scores.slice(0..8).each.with_index do |score, i| %>
          <tr>
            <td><%= i + 1 %></td>
            <td><%= score.par_count %></td>
            <td><%= score.stroke_count %></td>
            <td><%= score.putt_count %></td>
            <td><%= score.ob_count %></td>
            <td><%= score.penalty_count %></td>
            <td><%= score.stroke_count - score.par_count %></td>
          </tr>
          <% end %>
          <tr>
            <td>OUT</td>
            <td><%= @round.scores.slice(0..8).pluck(:par_count).sum %></td>
            <td><%= @round.scores.slice(0..8).pluck(:stroke_count).sum %></td>
            <td><%= @round.scores.slice(0..8).pluck(:putt_count).sum %></td>
            <td><%= @round.scores.slice(0..8).pluck(:ob_count).sum %></td>
            <td><%= @round.scores.slice(0..8).pluck(:penalty_count).sum %></td>
            <td><%= @round.scores.slice(0..8).pluck(:stroke_count).sum - @round.scores.slice(0..8).pluck(:par_count).sum %></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-lg-6">
      <table class="table table-light table-striped table-sm text-center">
        <thead class="bg-secondary text-light">
          <tr>
            <th>HOLE</th>
            <th>PAR</th>
            <th>SCORE</th>
            <th>PUTT</th>
            <th>OB</th>
            <th>PENA</th>
            <th>RESULT</th>
          </tr>
        </thead>
        <tbody>
          <% @round.scores.slice(9..17).each.with_index do |score, i| %>
          <tr>
            <td><%= i + 10 %></td>
            <td><%= score.par_count %></td>
            <td><%= score.stroke_count %></td>
            <td><%= score.putt_count %></td>
            <td><%= score.ob_count %></td>
            <td><%= score.penalty_count %></td>
            <td><%= score.stroke_count - score.par_count %></td>
          </tr>
          <% end %>
          <tr>
            <td>IN</td>
            <td><%= @round.scores.slice(9..17).pluck(:par_count).sum %></td>
            <td><%= @round.scores.slice(9..17).pluck(:stroke_count).sum %></td>
            <td><%= @round.scores.slice(9..17).pluck(:putt_count).sum %></td>
            <td><%= @round.scores.slice(9..17).pluck(:ob_count).sum %></td>
            <td><%= @round.scores.slice(9..17).pluck(:penalty_count).sum %></td>
            <td><%= @round.scores.slice(9..17).pluck(:stroke_count).sum - @round.scores.slice(0..8).pluck(:par_count).sum %></td>
          </tr>
          <tr class="bg-secondary text-light">
            <th></th>
            <th><%= @round.scores.sum(:par_count) %></th>
            <th><%= @round.scores.sum(:stroke_count) %></th>
            <th><%= @round.scores.sum(:putt_count) %></th>
            <th><%= @round.scores.sum(:ob_count) %></th>
            <th><%= @round.scores.sum(:penalty_count) %></th>
            <th><%= @round.scores.sum(:stroke_count) - @round.scores.sum(:par_count) %></th>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>


