<div class="container my-4">
  <h4 class="text-center mb-3">ユーザー一覧<%= "(#{@users.count}人)" %></h4>
  <div class="row">
    <div class="col-lg-3 my-3">
      <%= render "users/search", q:@q %>
    </div>
    <div class="col-lg-9">
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th><%= sort_link(@q, :account_name, "Name") %></th>
            <th><%= sort_link(@q, :prefecture, "Area") %></th>
            <th><%= sort_link(@q, :teens, "Age") %></th>
            <th><%= sort_link(@q, :rank, "Rank") %></th>
            <th><%= sort_link(@q, :average,"Average") %></th>
            <th>Experience</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @users.each_with_index do |user,i| %>
          <tr>
            <td><%= i + 1 %></td>
            <td>
              <%= link_to user_path(user) do %>
                <%= attachment_image_tag user, :profile_image, fallback: "no-image.jpg", size: "30x30", class: "rounded-circle" %>
              <% end %>
            </td>
            <td><%= link_to user.account_name, user_path(user) %></td>
            <td><%= user.prefecture %></td>
            <td><%= user.teens %></td>
            <td>
              <% unless user.rounds.blank? %>
                <%= user.rank %>
              <% else %>
                <span>未登録</span>
              <% end %>
            </td>
            <td>
              <% unless user.rounds.blank? %>
                <%= user.get_average_score(:stroke_count) %>
              <% else %>
                <span>未登録</span>
              <% end %>
            </td>
            <td><%= "#{user.experience_year}年#{user.experience_month}ヶ月" %></td>
            <td><%= render "users/follow_btn", user:user %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
      <p class="d-inline-block mx-auto"><%= paginate @users %></p>
    </div>
  </div>
</div>