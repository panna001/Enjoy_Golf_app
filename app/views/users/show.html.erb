<div class="container mt-5">
  <div class="row mx-auto">
    <div class="col-4 text-right">
      <%= attachment_image_tag @user, :profile_image, fallback: "no-image.jpg", size: "150x150", class: "rounded-circle shadow" %>
    </div>
    <div class="col-8">
      <div>
        <span class="h4"><%= @user.account_name %></span>
        <!--修正必要-->
        <% if @user == current_user %>
          <%= link_to "プロフィール編集", edit_user_path(@user), class: "btn btn-sm btn-outline-secondary d-inline-block mx-3 shadow mb-2" %>
        <% else %>
          <% if @user.followed_by?(current_user) %>
            <%= link_to "フォロー中", user_relationships_path(@user), class: "btn btn-sm btn-primary d-inline-block mx-3 shadow mb-2", method: :delete %>
          <% else %>
            <%= link_to "フォローする", user_relationships_path(@user), class: "btn btn-sm btn-outline-primary d-inline-block mx-3 shadow mb-2", method: :post %>
          <% end %>
        <% end %>
        <!--〜〜〜〜〜〜〜-->
      </div>
      <span class="d-inline-block mr-3"><%= "投稿 #{@user.posts.count} 件" %></span>
      <span class="d-inline-block mr-3">
        <%= link_to followings_user_path(@user), class: "text-dark" do %>
          <%= "フォロー #{@user.followings.count} 人" %>
        <% end %>
      </span>
      <span class="d-inline-block mr-3">
        <%= link_to followers_user_path(@user), class: "text-dark" do %>
          <%= "フォロワー #{@user.followers.count} 人" %>
        <% end %>
      </span>

      <p><%= @user.first_name + @user.last_name %></p>
      <p><%= @user.introduction %></p>
    </div>
  </div>
  <div class="row my-4">
    <div class="col-lg-8 mx-auto">
      <div class="row">
        <div class="col-lg-4">
          <p>ゴルフ歴：<%= "#{@user.experience_year}年#{@user.experience_month}ヶ月" %></p>
          <p>都道府県：<%= @user.prefecture %></p>
          <div class="mt-3">
            <%= link_to "スコア一覧", user_rounds_path(@user), class: "btn btn-sm btn-outline-success shadow" %>
            <% if @user == current_user %>
              <%= link_to "スコア登録", new_user_round_path(@user), class: "btn btn-sm btn-outline-warning shadow"  %>
            <% end %>
          </div>
        </div>
        <% if @user.scores.present? %>
          <div class="col-lg-4">
            <p>アベレージ：<%= @score %></p>
            <p>パット：<%= @putt %></p>
          </div>
          <div class="col-lg-4">
            <!--スコアについて記載-->
            <p>フェアウェイキープ率：<%= @fairway_keep_rate %>%</p>
            <p>パーオン率：<%= @par_on_rate %>%</p>
            <p>アンダーパーオン率：<%= @under_par_on_rate %>%</p>
          </div>
        <!--ゴルフ歴-->
        <% else %>
          <div class="col-lg-8">
            <p>スコア登録をしましょう。</p>
          </div>
        <% end %>
      </div>
    </div>
  </div>


  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 mx-5 pt-5 border-top">
    <% @user.posts.each do |post| %>
     <%= render "users/card", post:post %>
    <% end %>
  </div>
</div>
